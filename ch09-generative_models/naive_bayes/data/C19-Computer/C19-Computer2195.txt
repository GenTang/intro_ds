计算机应用研究
APPLICATION RESEARCH OF COMPUTERS
2000　Vol.17　No.2　P.65-67



基于Internet技术的证券委托交易系统
张建军　杨德华　罗涛
摘 要 结合上海国泰证券公司网上证券委托交易系统的开发，采用面向对象的分析方法和Intranet体系结构，详细论述了利用Java语言开发基于Internet应用系统的技术和实际操作等问题，并着眼于电子商务在Internet上的应用，探讨了我国企业在此领域发展的前景。
关键词 Internet Java语言 Java Applet Java Servlet 面向对象 客户机/服务器 超文本语言
1 引言
1.1 Internet的发展
　　互联网(Internet)可说是二十世纪末最热门且影响最深远的信息技术。由于网络的蓬勃发展与迅速成长及其没有边界的特性，再加上计算机在世界范围内的迅速普及，造就了网络成为现代最大的信息传播及行销媒体。可以预见，Internet势必将发展成为二十一世纪最大的商场。
　　当今，Internet技术的飞速发展已经带动了许多行业的进一步发展，随着新技术的应用，新的观念和思维也逐渐开始进入人们的生活。在我国，特别是最近几年以来，Internet技术已迅速渗透到社会各个领域。与国外相比，虽然我国的互联网发展现状还比较落后，但越来越多的人已经开始认识到Internet的重要性，并且希望能够在工作和学习中加以应用。
　　最新Internet上的应用趋势是电子商务(EC：Electronic Commerce)的发展，电子商务也就是指利用Internet进行的商务活动。它主要包括利用电子数据交换(EDI)、电子邮件(E-MAIL)、电子资金转帐(EFT)及Internet的主要技术在个人、企业和国家间进行无纸化的业务信息的交换。目前，电子商务在欧美各国正在得到广泛的应用，在我国还处于起步阶段，但国家和各级政府已经开始采取措施，加大力度来进行这一技术的研究和推广工作。
1.2 项目介绍
　　上海国泰证券公司的基于Internet技术的证券委托交易系统(以下简称委托交易系统)属于电子商务在金融证券领域内的应用，它的开发采用了目前先进的Web技术和Java技术。通过这一系统，用户足不出户就能够通过Internet进行证券交易，方便快捷地发出委托信息，并且迅速得知成交情况，大大方便了客户并节省了时间。
　　此系统的开发着眼于国内外客户，系统备有中英文两个版本，并考虑了国内外用户的应用差别，系统的用户界面是通过浏览器(如Netscape，Internet Explorer等)来实现的，界面简单明了，易于操作，能较好地满足用户的需要。
1.3 文章结构
　　本文以下重点探讨此委托交易系统的技术与开发问题。准备分三个部分来详加阐述：
　　1)系统模型技术
　　2)系统功能划分
　　3)系统实施方案
2 系统模型技术
2.1 面向对象的分析方法和对象建模技术
　　本系统的系统分析采用的是面向对象的分析方法和对象建模技术。
　　面向对象分析方法(OOA)是建立在事物可以用对象来表示的基础上的。在系统分析和设计时围绕客观世界的对象或用户对客观世界的映象来组织。由于将数据和对数据的行为操作结合起来作为一个集成的对象来对待，系统的修改只需改变和增删一些对象或操作就可以了。因此分析、设计的系统更容易理解。这些优点都是面向过程分析方法所不具备的，并适应现代软件工程的特点。
　　对象建模技术(Object Modeling Technique，OMT)作为一种重要的面向对象软件方法学，已经成为面向对象技术的主要流派之一，它支持软件生命周期的各个阶段，能实现系统的集成开发。OMT是一种围绕真实世界的概念来组织模型的软件开发方法，它使用三种模型来描述系统：静态对象模型，动态模型和功能模型。静态对象模型描述了系统中对象的静态结构以及对象间的联系，用静态对象模型图来描述。动态模型描述了与时间和操作次序有关的系统特征。动态模型由多张状态图组成，各个类的状态图通过共享事件组成系统的动态模型。功能模型描述系统内数据值的变化，它由数据流图组成。流图说明数据流是如何从外部输入，经过操作和内部存储而到外部输出的。
　　相对于传统的软件工程方法学，OMT的开发重心移到了分析阶段，使得分析的结果更为可靠。OMT在整个开发过程中使用统一的软件概念(对象)，所有其它概念都是围绕对象组成的，在分析阶段开发的对象模型也适用于设计和实现阶段。
2.2 系统模型的建立
　　在此系统模型的建立时，应用OMT方法的过程为：首先构造系统的静态对象模型，然后依次对其中的各种对象以及各种界面对象建立起动态模型以及系统的功能模型。静态对象模型如图1所示(不包括界面对象)。

图1　系统的静态对象模型
其中，上市公司包括证券公司。
　　整个模型可分为两大部分，即委托交易部分和股市分析部分，两者之间通过证券对象相联系。委托交易部分主要包括证券委托交易及相关单据处理。股市分析部分则侧重行情信息及有关证券分析报告。
　　系统的典型工作方式是：界面对象接收用户的要求，并向有关对象发送以及接收有关对象发来的消息及数据，而这些消息和数据通过Internet传送到用户浏览器界面。
3 系统功能划分
　　根据用户的实际需要，本委托交易系统的功能结构主要可以分为以下四部分(见图2)。

图2　功能图
　　(1)客户开户：需要输入有关个人资料，经核实后可以给予帐户授权，包括帐号、用户名和密码。
　　(2)委托交易：交易时先要进行身份验证，然后开始买、卖或撤单操作，用户从上海或深圳股市中选择股票代码及名称，填写完买卖价格及交易数量，然后提交即可。
　　(3)实时查询：查询各类信息。通过交割单和成交明细，用户能够知道所发委托单是否成交，而且可以查询资金帐户上的资金剩余和股东帐户上的股票余额。
　　(4)行情显示：实时显示沪深股市行情信息。
　　此系统的用户界面部分通过工作站端的浏览器实现，相关的还有服务器端的后台数据变换部分。后者用Java的Application技术编写，直接运行在服务器上，不需浏览器支持。限于篇幅，其内容就不深入介绍了。
4 系统实施方案
4.1 Java技术
　　在此委托交易系统的实施中，主要采用Java技术来进行开发。Java语言的出现虽然不久，但其发展速度却是惊人的。它的出现，使开发具有可移植性的网络软件的工作变得更为简便和有效。Java是首先由Sun公司开发出来的一种编程语言，从广义上来讲，它不仅指语言本身，还包括一个Web计算模式下的开发和运行环境。
　　Java的优点在于它实现了与体系结构的无关性(可在不同的硬件体系结构和操作系统上运行)，并且可以和多种编程语言接口实现应用交互。Java是开发安全可靠、分布式、基于网络的、客户端应用的程序的有力工具，它采用了多种机制来保证其可移植性，不仅开发的原代码，连原代码编译后的二进制码也可移植。Java编译器对原代码编译，生成的字节码基于一种抽象的解释Java虚拟机(JVM)。JVM加载Java字节码，并根据它的指令操纵系统工作。JVM实际是一个可运行Java字节码的虚拟操作平台。Java Applet程序在浏览器中很容易与超文本语言(HTML)有机地结合在一起，大大增强了它在Internet上应用的有效性。用Java开发既简单方便，代码小巧，又可靠安全且高效，已成为目前Internet编程的强有力工具。
　　Java的开发工具我们采用的是Sun公司的JDK1.02版，Microsoft公司的Visual J++ 1.1和Symantec Cafe 1.51版本。此外还采用了很多工具，如IBM的Visual Age for Java，Borland的J Builder等等。
4.2 Applet与Servlet
　　本委托交易系统的程序实现，主要由两部分构成：一部分是用Java Applet技术开发的应用程序，委托交易部分是用其来实现的；另一部分是由Java Servlet来完成的，主要包括数据库查询程序。两种手段虽然都是由Java语言来编写，但在具体实现上又有许多不同。
　　Applet技术目前应用较广泛的是与HTML文档相结合，编写动态网页及用户友好的界面，以及存取数据库中的数据。它的编写较为自由，适合于实现较为复杂的功能。Applet编译后生成的Class文件直接嵌入到HTML文件中，在浏览器中运行。
　　Java Servlet主要应用在系统的信息查询和客户注册上。为什么不都用Applet来开发呢？这主要考虑到Servlet运行于服务器端，不需用户端环境支持，运行效率高，响应快。另外由于浏览器中Applet的安全机制使得用Applet实现打印功能较为困难，而Servlet实现打印则十分容易。
　　Servlet的编写需要JSDK，本系统采用了Sun公司的JSDK 1.01版。
　　Servlet也有自己的缺点，它运行于服务器端，其前端界面大多用HTML的Form形式来实现与用户的对话。而HTML界面编写起来不够灵活，实现的功能也相对简单，比较适合用在单纯的“问答式”提交的界面上，对于较复杂的GUI功能往往难以实现，因此只用它来实现一些特定的功能。
　　Java Applet和Servlet程序在执行时，要与服务器上的数据库进行连接，本系统采用JDBC接口来完成。JDBC是连接Java程序和数据库的桥梁。Applet在连接时，通过JDBC Type 3 Driver驱动程序进行；Servlet因在服务器端，使用的是JDBC Type 4驱动程序。
4.3 Web技术
　　国泰委托交易系统属于三层结构的Web计算模型，它不同于传统的C/S计算结构。传统C/S结构下，应用系统被分为前端(客户机)和后端(服务器)两部分。它们通过消息传递机制进行对话，由客户端发出请求给服务器，服务器进行相应处理后经传递机制送回客户端。客户端集中了应用系统主要的GUI程序。而最新Web模型的发展是三层结构，是基于Internet/Intranet的模型。
　　三层结构的Web计算模型把传统C/S模型的服务器端进一步深化，分解成一个应用服务器(Web服务器)和一个或多个数据库服务器，从而成为三层或多层模型。它简化C/S中的客户端，只需装上操作系统、网络协议软件及浏览器即可(也称为瘦客户机)，而服务器端则集中了所有的应用软件的服务、开发、维护等工作。随着Web技术，分布式对象计算技术等的发展，C/S发展的趋势是多级Server模式，Server通过网络连接在一起，完成大量应用计算。Java提供了标准化的，跨C/S的计算平台。
　　采用Web模式，所有的应用程序存放在服务器上，而客户机运行的则是嵌在Web页中用Java写的Applet应用程序。现在Internet上的WWW应用不仅将各种对象(文本、图象、视频、声音)以多媒体形式供用户浏览，并能和其它网络服务紧密结合在一起。随着Java、JavaScript、ActiveX等新技术的出现，具有了更强的交互性。
4.4 其它技术与问题
　　在本委托交易系统的具体开发实施中，为了使系统能够有良好的开发和运行环境以及满足用户需求，还采用了如下技术。
　　系统的数据库采用的是IBM的DB2 5.0版本，这是一个比较成熟的具有面向对象特征的大型关系型数据库，对多媒体数据以及面向对象特征的支持较强。开发前台采用Win95系统，后台服务器用的是OS/2 Warp Server操作系统，此系统在效率和稳定性上都有其独特优势。所有的Java程序与网页都放在服务器上，服务器端运行的Web服务软件是Lotus Go Web Server 4.6.1。
　　此系统对安全性和速度的要求较高。因为网上证券交易牵扯到大量的资金转移，因此是否安全成为评价系统优劣的关键性问题。为了使客户和证券公司能放心地使用，采取了必要的措施对系统的安全性加以保证。如登录时需帐号和密码；采用代理(Proxy)服务器与防火墙(Firewall)软件；浏览器与Web服务器之间采用SSL加密协议传输数据；服务器取消Telnet程序等。系统利用Go Web Server 4.6.1中的安全传输SSL功能，在服务器上建立CA，并将有关页面采用HTTPS安全协议传输。至于速度问题，用户关心的主要是行情显示速度，可采用数据压缩传输、比较传输等手段来解决。
　　在系统开发中，不可避免地也出现了一些问题。如开始没有考虑到浏览器对Java编译环境JDK版本的支持程度，浏览器对Applet中的汉字支持存在缺陷等，实际工作中对这些问题花费了很多精力才加以解决。
5 结论
　　国泰公司网上委托交易系统的设计和实现采用了当今计算机领域先进的技术，能有效地完成所需的各项功能任务。目前，使用Java技术开发基于Internet的客户系统，在理论和实践上都是可行的。除了系统所用的Java技术和Web技术之外，采用其它技术来构建此类系统还存在一定困难。
　　系统首先具有可行性。通过科学认真地开发和实施，证明该系统从分析设计到具体应用，都能较好地实现用户设想。系统采用先进的开发技术，利用世界上最丰富的信息资源网，提供意识超前的服务，使证券交易不仅仅局限在证交所里进行，扩大了业务范围，达到了实用性和先进性的统一。
　　系统具有高效率。信息传输快捷方便，用户足不出户就可进行证券交易，节省了人力物力，资源得到有效利用，大大提高了服务效率。
　　系统的安全性也得到较充分保障。用户可以放心地使用而不必担心自己的资料得以泄漏或被盗用。
　　此类系统的开发以前没有多少先例，可供借鉴的经验很少，所用的技术又较新，需要花大量的时间来掌握。虽然有着这些不利因素，但我们有理由相信，这一基于Internet技术的证券委托交易系统一定能够顺利地得以应用，收到应有的效益，并且希望能够带动相关行业的进一步快速发展！
张建军（同济大学经济管理学院 上海 200092）
杨德华（同济大学经济管理学院 上海 200092）
罗涛（同济大学经济管理学院 上海 200092）
参考文献
1，刘敬军, 张申生. 综合面向对象和面向过程的对象过程方法. 计算机工程,1998.4, 24卷4期, 13～15
2，田志刚. 基于回调技术的客户机/服务器JAVA编程. 微计算机应用, 1998.3, 19卷2期, 95～97
3，邵晓凌, 张 然. OMT设计的Java实现. 计算机科学, 1997.6
4，王鲁滨, 孙宝文. Intranet和Extranet的兴起与企业信息系统的变革. 管理信息系统, 1998.1, 11
5，周卫华, 朱 珠. Client/Server下信息系统的对象体系结构. 计算机工程,1998.5, 24卷5期, 9～10
收稿日期：1999年9月9日
