计算机应用研究
APPLICATION RESERCH OF COMPUTERS
2000  Vol.17　No.1　P.100-101，117




面向对象建模在地表岩移管理信息系统中的设计与实现
易彤　栾元重　邓敏
摘 要 根据对面向对象分析、设计与建模及可复用构件理论的研究，作者通过对矿山地表移动和变形的数据分析，结合软件开发的实践经验，采用当前面向对象领域最为流行的统一建模语言进行系统建模，开发了一套集岩移数据管理、计算、打印及图形显示等功能于一体的系统软件，这对提高矿山地表岩移监测自动化具有较大的促进作用。
关键词 面向对象 岩层移动 管理信息系统 UML
1 引言
　　由于地下开采、上部荷重和地质条件等众多因素的影响，使得地表及岩层产生移动和变形，从而对生活环境、耕地和建筑物的安全产生不同程度的影响。以往对地表及岩层的移动和变形进行分析时采用手工的计算和绘图方式，因其数据量较大、工作效率较低，难以满足工程技术人员快速、直观地进行数据分析的要求。为此，作者采用当前面向对象领域最为流行的统一建模语言(Unified Modeling Language，简称UML)进行系统建模，并在此模型基础上开发了一个集岩移数据管理、变形计算、打印及图形显示等功能于一体的系统软件地表岩移管理信息系统(简称GMIS)。
2 GMIS的系统功能简介
　　本系统软件以中文Windows 98为开发平台，在原矿山地表岩移管理信息系统(简称S-MIS)的基础上，采用Visual C++5.0进行重新开发。与S-MIS相比，GMIS的功能更为强大，而且系统结构更为合理，是一套能对地表变形和监测进行决策的系统软件，其系统功能结构如图1所示。

图1　GMIS系统功能结构
　　系统从功能结构上可分为九大模块，现简要叙述如下。
　　1)数据管理 由于数据信息资源的利用和管理是一项非常重要的工作，尤其是它的安全可靠性。因此，在进入本模块操作之前，提醒用户输入姓名、操作口令和权限级别。它的功能是用于矿山地表观测站观测数据(如：高程、坐标数据)的录入、修改、浏览及检索。其中在数据录入子模块中提供了三种数据进库方式，如将全站仪中存储的数据通过通讯接口进入系统起始数据库等。
　　2)平差计算 由于仪器和人为观测等因素的影响，使得野外测量数据必然含有误差，从而难以满足导线网和水准网的约束条件。因此，在利用这些数据进行地表变形值计算之前需要进行数据处理。为此，本模块设立了闭(附)合导线及导线网和水准网平差计算两个子模块。
　　3)变形值计算 它主要用来计算地表变形数据，如垂直变形、水平变形以及下沉速度。这些计算数据信息是进行地表移动与变形分析的主要依据；同时，也用于计算岩移参数和图形绘制。由于岩移监测数据的观测期数不确定，即库结构的动态性，而计算数据又是根据起始数据并借助不同的岩移沉陷数学模型得到，为此，本模块实现了对两个或多个动态数据库的操作。
　　4)岩移求参 在综合分析实测资料时，应分别求算沿走向和倾向的概率积分法参数，以便进行岩移预计。根据当前常用的岩移参数求算方法，本模块划分为岩性对比法求参和实测数据法求参。
　　5)变形预计 在经过上述计算过程之后，则可得到监测区域内各观测点的平差数据和各种变形数据，但从这些离散数据中仍难以分析采矿过程中地表变形与移动的规律以及预计等。因此，需要对地表形态变化进行拟合分析。本模块提供了如下六种分析模型，分别为随机介质模型、负指数模型、样条函数模型、时序分析模型、灰色动态模型和神经网络模型。
　　6)图形绘制 本模块是通过调用各种变形计算数据文件实现的。用于绘制各种不同的变形曲线图，等值线图及立体图，从而帮助用户直观地分析和得到地表移动与变形信息。
　　7)数据打印 主要用于原始数据、平差计算数据、变形数据以及综合数据的打印。由于每种数据可能有很多期数，并且期数不确定。因此，系统在进行各种数据打印之前，提供了数据打印的自定义。即用户可以根据其实际需要设置要打印数据的范围和期数，打印时系统会根据用户的设置进行自动处理并按每页六期数据进行横向式分页打印输出。如不进行设置，系统将按默认方式将所需打印的数据从首期数据开始，以每页六期进行横向式分页打印。
　　8)系统维护 为便于该系统的管理和操作，设计了系统维护模块，包括操作员管理、口令修改、重新登录、权限级别设置、系统日志及系统初始化六个子模块。
　　9)系统帮助 本系统提供了丰富、详实的帮助信息，操作员在操作过程中，如遇到任何问题，按【F1】键，系统会自动依据当前环境来显示相应的帮助信息。
3 GMIS的系统模型结构

图2　GMIS系统类结构图
　　在本系统软件的开发过程中，作者采用了当前面向对象领域最流行的UML及构件技术进行系统结构建模。作为一种定义良好、易于表达、功能强大且普遍适用的标准建模语言，UML融入了软件工程领域的新思想、新方法和新技术。它主要是以面向对象图的方式来描述任何类型的系统，并且支持从需求分析开始的软件开发的全过程，因而具有很广泛的应用领域，也具有重大的经济价值和国防价值。同时，在对GMIS进行需求分析、设计和具体应用开发的过程中，作者发现可充分应用可复用构件的技术对系统进行进一步的优化。为此，通过研究，作者认为一个完整的MIS，除具备相应的信息处理功能，大都具有一些共同的基本功能。根据软件复用理论和构件理论，可将这些共同的基本功能设计成一个通用构件，并可将其组合到其它MIS中。通过对MIS的研究和分析，作者认为这一通用构件应具有操作员管理、口令修改、系统日志、权限级别设置、程序错误记录等功能。在理论研究的基础上，作者结合以往MIS开发的经验，设计并实现了这一通用构件(Generalcomponent)，并通过在GMIS开发中对这一构件的复用，消除了在开发中存在的许多重复劳动，避免了重新开发可能引入的错误，提高了本系统的可靠性，并缩短了其开发周期。本系统类结构图如图2所示。限于篇幅，本文不再对其具体库结构和细节功能的实现作进一步的介绍。
4 GMIS系统的应用
　　在完成上述GMIS系统开发的基础上，作者结合所承担的新汶矿务局地表岩移观测项目，将此系统具体应用于翟镇矿区。在此，不再介绍监测区域岩移观测站整体布设情况。矿区首采面观测站设立了沿走向和倾向的两条相互垂直的观测线，共设置了102个观测点，自1997年10月至1999年5月已进行了9期变形观测。
　　下面是GMIS系统在翟镇矿区岩移地表观测站的一个具体应用实例。其中，图3(a)表示首采面全盆地下沉等值线图；图3(b)表示走向观测线水平移动速度曲线图；图3(c)表示监测区域整体沉降分布立体图。

图3（a）　首采面全盆地下沉等值线图

图3(b)　走向观测线水平移动速度曲线图

图3(c)　监测区域整体沉降分布立体图
5 结束语
　　在GMIS的研制开发过程中，作者充分考虑了地表岩移观测的内容、方法及特点，采用了UML技术进行系统建模，并通过可复用构件技术在系统开发中的应用，消除了在开发中存在的许多重复劳动，缩短了
　　开发周期。在实际应用中，系统运行稳定可靠，提高了地表岩移信息管理的工作效率和质量，实现了地表岩移观测数据的计算机现代化管理，并已取得了良好的经济效益和社会效益。
国家自然科学基金资助项目(编号：49801016)
易彤（宜春医学高专 江西宜春 336000）　
栾元重（山东矿业学院 泰安 271000）　
邓敏（山东矿业学院 泰安 271000）
参考文献
1，许日滨, 刘 征, 孙英华. 面向对象的编程向导Visual C++5.0. 人民邮电出版社, 1998.10
2，Design Patterns. Elements of Reusable Object-Oriented Software. 1997
3，Ivar Jacobson.Software Reuse. ACM press. 1997
4，UML Specification(draft) V1.3 Alpha R3.OMG. 1999.1
5，陈余华, 方美琪. 信息系统工程的面向对象的方法. 清华大学出版社, 1999
6，英国煤炭局编. 地表沉陷工程师手册(中译本). 煤炭工业出版社, 1990
7，煤炭科学院北京开采所编著. 地表移动与覆岩破坏规律及其应用. 煤炭工业出版社. 1981
收稿日期：1999年7月16日
