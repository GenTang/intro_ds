计算机应用研究
APPLICATION RESERCH OF COMPUTERS
2000  Vol.17　No.1　P.23-25，32




基于Agent的网上市场体系
崔翔　陈跃新
摘 要 电子商务领域是目前计算机应用发展的热点之一，而将分布智能技术应用于电子商务又是人工智能理论走向实际应用的重要方面，分析了基于Agent的网上市场所应具有的体系结构及运行机制，给出了网上市场的一般模型VAGMA(Virtual Agent Marketplace Architecture)。
关键词 电子商务 Agent 代理交易
1　引言
　　随着Internet和WWW技术的发展，越来越多的网上商务过程开始采用Agent技术。软件Agent可以由人所控制，也可以代理人在网上自主地完成电子商品或物理商品的交易过程。
　　目前，已经有许多基于Agent技术的在线商店在WWW上运行，如Andersen建立的Bargain Finder和由Maria Gini建立的FireFly，这两个系统均是用来帮助用户在线选购CD和磁带的。Bargain Finder (http: //bf.cstar.as.com)系统实际上是一个数据检索Agent，它根据用户所给出的信息在若干网上商店中找到用户所需的最便宜的商品；FireFly(http://www.agentinc.com/)的能力强于Bargain Finder，它除了完成对商品数据的检索功能以外，还试图在与用户的交互过程中了解用户的喜好和偏爱，并给于用户相应的购物指导。
　　虽然上面两个基于Agent的在线商店确实完成了商品的买卖过程，但它们所完成的工作和更广泛意义上的电子商务还有很大差距。主要表现在：这两个系统没有体现和映射出商品市场的一般结构；其次，这两个系统没有体现出Agent之间的协作和代理交易过程。
　　Kasbah是一个基于Web的交易系统，在该系统中，用户可以创建Agent以代理自己进行商品的买卖。该系统采用黑板机制，Agent将自己的要求提交到黑板上而后等待响应。该系统虽然提供了代理用户完成交易的功能，但同时它也有许多局限性：Kasbah中的Agent使用局限的消息协议，从而使Agent之间不能完成协商；Kasbah只运行在服务器端，从而大大限制了系统的灵活性；通过将所有的Agent在服务器端建立映象，Kasbah系统的设计者回避了Agent之间交互时通信的安全性问题，但同时限制了Kasbah不可能允许大量的甚至是嵌套的Agent同时运行。
　　我们认为，在一个网上市场中应该包括在Internet上完成交易过程的所有必要部件，它应该支持Agent之间的交互与协作，并允许由用户控制或Agent代理的交易的完成。在本文中将主要讨论以下几个问题。
　　。基于Agent的网上市场应该具有什么样的结构？
　　。基于Agent的网上市场应该具有哪些部件以及如何运行？
　　。基于Agent的网上市场应该采用什么样的运行机制？
　　为了更好地说明以上问题，我们提出了一个网上市场的模型，名为VAGMA(Virtual Agent Marketplace Architecture)。通过对该模型的分析和应用，希望对网上电子商务的发展提供一些借鉴和参考。
2　基于Agent的网上市场的基础设施
　　基于Agent的网上市场应该表现出一些和现实世界中市场相同的特性(Amihud l987)。例如，该市场应该具有完成货币功能的银行(Panurash l996)，具有可靠和安全的通信机制(Bhimani 1996)，具有使货币和商品安全交易的传输机制，具有对买方、卖方的意愿进行宣传的广告机制，甚至应该具有行政部门和法律部门对市场的控制和监督机制。
2.1　银行
　　为了使网上市场真正成为一个市场，它至少应该具有提供货币职能和金融服务的银行部件。银行Agent和Agent之间的交互应该具有开放的统一的接口，该接口可以使传统的银行参与到网上市场的运行中来。Pannrach(1996)认为，建立开放的统一的银行接口标准具有以下优点。
　　。客户可以在提供服务的各个银行中进行选择，从而导致银行之间的竞争并促使其优胜劣汰；
　　。对银行的管理是统一的，从而使管理措施能够得到更加明确和高效地执行；
　　。客户可以更加方便、高效地参与银行的业务。
2.2　通信设施
　　在系统核心必须有必要的设施以支持高效地、可靠地通信。通信设施应该具有统一的开放的接口，任何开发者都可以开发符合该标准的插件并参与到系统的运行中来。在设计通信设施时应该注意以下约束。
　　。各个Agent应能够读取公共黑板以取得全局信息；
　　。各个Agent通信应采用统一的语言，在语言中至少应该包括发出和响应请求的原语。
　　如果Agent参与一个组织的工作，在同一组织中的Agent可以有自己的工作语言。
2.3　广告机制
　　在现实的市场经济中，广告是不可或缺的重要的经济手段，因此，在进行网上商务营销时，也应该有必要的机制与之对应。实现广告功能的一种可能方式是在系统中设置一个或多个广告Agent，广告Agent维护本地广告信息数据库并响应其它Agent的咨询请求。另一种实现广告功能的方式是由A.Keller提出的使用快捷Agent的方法，该Agent拥有自己的知识库并作为一名代理者为其客户向其它广告Agent或数据库查询有关信息。
3　网上市场的运行机制
　　本文的目标是要提出一个能够高效快捷地完成商品的买卖、银行业务、货币转移、广告等多种商务功能的基于Agent的网上市场的模型。在前面我们已经提出了在网上市场中所应具有的必要的经济部件，在这一部分中将详细阐述货品买卖过程中的营销策略和方式等问题。
3.1　基本交易方式
　　目前，已经有许多基于Agent电子商务交易方式的研究成果，归结起来可分为以下两类：由客户参与的直接交易方式和由Agent代理的交易方式。
　　直接交易方式的最大优点是买卖双方可以对价格进行充分地协商。在这种交易方式下，卖方可以直接或间接通过广告Agent向潜在买方们发出广告，买卖双方通过议价达成最后交易。在本文开始所提到几个在线商店便是直接交易方式的典型例子。在直接交易方式中，Agent需要具有高效的规则系统以协助用户获取市场的行情及帮助用户完成协商过程，Agent的工作方式如图1所示。

图1　Agent直接交易方式
　　直接交易方式对任何一个基于Agent的网上市场都是必要的，但在有些情况下该方式并不能满足实际需要，诸如：(1)买方和卖方在分布的系统中彼此很难找到对方；(2)用户希望保持匿名身份而不愿直接参与交易过程；(3)用户需要定时地进入市场并希望Agent代表自己的利益完成例行的交易工作。这时，就要引入另一种交易方式，即Agent代理交易方式。在Agent代理交易方式中，代理Agent需要主动地参与市场，从市场中寻找最优的交易方案，代理Agent的一般工作方式如图2所示。

图2　Agent代理交易方式
3.2　代理Agent的交易策略
　　交易策略是指整个交易系统的运行方式及各个交易Agent的行为方式，设计有效的策略很大程度上依赖于Agent之间的交互方式。参与交易的Agent(买方和卖方)为某一件商品投标并按照各自的策略相互协商，直到达成双方均为满意的均衡价格(fair price)。各个Agent的策略决定着各个Agent在不同情况下所采取的行为。
　　设计Agent交易规则和策略的核心问题在于：在许多情况下，Agent并没有足够的信息来知道其它Agent所卖商品的真实价值。这时，Agent不仅应该使用有效的策略设法取得其它Agent的私有信息以了解商品的真实价值，而且还要采用动态的策略保护自己的私有信息和利益。例如，一个Agent i 至少知道自己关于商品I的保留价格(reservation price)。保留价格是指卖方Agent愿出价格的最小值(表示为)或买方Agent所愿出价格的最大值(表示为Vbi(I))。如果Agent i为卖方Agent且它得到买方Agent j的保留价格v，则i可以在Vbj(I)的价格上(或略高一些)向j发出take-it-or-leave-it的消息；反之，如果买方Agent j得到VSi(I)，类似的情况也可以发生。
　　在有些情况下，Agent可以通过隐瞒自己的保留价格为自己取得利益。比如，卖方Agent j可以出价远高于自己的保留价格VSj(I)，通常情况下，买方Agent i会给出一个位于当前出价和Vbi(I)之间的折中价格。在市场运行中，由于同一商品可能有多个买方和卖方，虚伪的出价将会使交易变得复杂化。
　　Sun和Weld(1995)通过对若干种交易策略的研究和比较，发现复杂度高、具有适应性的策略其效果要远好于简单还价策略。在不同的场景和目标条件下，Sun和Weld提倡使用不同的策略。比如一种可用的策略是英式拍卖策略，在这种策略下，一个卖者可由低向高提升价格直至只剩一个买者；与此对应，买者可由高向低降落价格直至只剩一个卖者。在分布环境中使用这种策略将会导致反复的、冗余的通信。
　　另一种可以采用的策略是投标交易策略。在这种策略下，每一个买方Agent向卖方Agent对商品给出投标价格，最高的出价者将会得到该商品，对于卖方竞卖的情况恰恰相反。采用这种策略的最大好处是交易将会一步完成，从而避免了复杂的、冗余的通信。
　　与以上两种策略类似的还有其它的一些策略，它们均具有以下不足之处的一种或几种。
　　。需要复杂地、反复地通信，而通信在分布系统中恰恰是最耗时和昂贵的；
　　。需要严格地保护Agent的私有信息和保留价格以维护Agent的利益；
　　。需要动态地推理其它Agent的意愿以取得商品的真实价值。
　　为了有效地避免上述不足，在Agent代理交易过程中最适用的策略是Vickvey策略(Vickvey 1961)。使用该策略可以鼓励在交易过程中买方Agent和卖方Agent都按照自己的真实意愿出价和竞价，从而避免投机，使交易过程更加诚实地完成。
3.3　Vickvey策略
　　Vickvey策略同上述的投标交易策略类似，不同之处在于Vickvey策略最后的成交价格取若干卖者中次低或若干买者中次高的价格。例如，假设卖方Agent i想要卖出商品I，买方Agent j和k分别以保留价格Vbj(I)和Vbk(I)竞价，最终商品I会以两个价格中次高的价格卖给出价最高的买者。即如果Vbj(I)>Vbk(I)，则Agent j最终将以的价格得到该商品。在若干卖者竞卖同一商品的情况下，则竞价最低的卖者将会以其次低的价格卖出商品。
　　在Vickvey策略下，各个Agent都具有诚实交易的趋势。比如，在有若干卖者竞卖的情况下，卖方Agent i不会竞价低于VSi(I)，因为如果存在其它卖方Agent出价仅仅略高于i的竞价而低于VSi(I)，则i将会只能以低于的价格卖出商品；而卖方Agent i也不会竞价高于VSi(I)，因为这将增加其失去交易机会的可能性(因为其它卖方Agent有可能竞价低于VSi(I))。与此相对应，具有若干买者竞买的情况也是类似的。
4　VAGMA的结构
　　VAGMA是我们为了模拟基于Agent电子商务过程而提出的网上市场的模型。在VAGMA中包含若干个交易Agent、一个广告Agent和一个银行Agent。其中，交易Agent完成市场中所有商品的买卖过程；广告Agent负责维护广告信息数据库并提供广告服务；银行Agent提供基本的金融服务诸如帐户转帐、信用卡结算和电子货币结算等。所有Agent在功能上是独立的并可以相互通信。为了简化系统结构和便于观察Agent之间的通信情况，我们设计了中继服务器与路由Agent之间的通信，这并不影响系统模拟的本质。VAGMA的系统结构如图3所示。在下文中将分别介绍VAGMA各个子部件的功能和设计思想。

图3　VAGMA的结构
4.1　广告Agent
　　广告Agent管理维护广告信息数据库并响应其它Agent的查询请求。在当前的设计中，广告Agent只是作为一个数据库搜索引擎进行工作。在将来的设计实现中，希望进一步扩展广告Agent的功能及数目以支持分类广告管理。
4.2　银行Agent
　　有关银行Agent的设计参考了DigiCash公司的电子货币系统。在一个Agent需要钱款时，它可向银行Agent申请被称为支票的回执，Agent收到该支票以后，可以用它作为货币来支付其它Agent，而其它Agent可以再次使用该支票完成支付功能，也可以申请银行Agent结算该支票并完成资金在银行帐户中的转移。
4.3　交易Agent
　　一个交易Agent具有钱夹、货单、广告管理和交涉四个子部件，其结构图如图4所示。

图4　交易Agent的结构
　　钱夹部件负责管理有关银行帐户、支票、套接字等信息并完成其上的相应操作，它提供了Agent完成银行相关任务的用户接口，钱夹部件同时负责Agent之间的货币支付工作。
　　货单部件用于管理有关该交易Agent所有的存货的清单，并将其保存到数据库中。货品可以通过人工加入或Agent购买加入到货品清单中。如果需要卖出一件商品，货单部件则将该商品的有关信息传递给广告部件和协商部件。
　　广告部件提供交易Agent和广告Agent之间交互的接口，交易Agent可以通过该部件向广告Agent增加广告信息或跟踪广告信息的变化。
　　交涉部件负责搜索商品、协调两个Agent之间的交互过程(在人工交易方式下)或自动的完成交易过程(在代理交易方式下)。在人工交易方式下，交涉部件可以接收用户查询广告的请求并将由广告Agent传回的结果过滤后呈现给用户，也可以协调用户同其它交易Agent的协商过程直到交易的最终完成；在代理交易方式下，交涉部件按照Vickvey策略自动地完成交易过程。
5　总结
　　在本文中，我们提出了虚拟网上市场的框架结构，并详细讨论了网上市场所应具有的功能部件以及网上市场的运行机制，最终给出了一个网上市场的模型VAGMA。目前，VAGMA还处于设计阶段，我们将进一步完善它的设计并最终使它在WWW上运行起来。在进一步设计和实现VAGMA的过程中，我们还需要解决以下问题：(1)细化和定义Agent之间的消息API，一种可能的方法是定义标准的ACL(Agent Communication Language)；(2)进一步研究和测试Vickvey策略；(3)扩充广告Agent的功能和数目以支持分类广告业务。
崔翔（国防科技大学计算机学院 长沙 410073）
陈跃新（国防科技大学计算机学院 长沙 410073）
参考文献
1，N. R. Jennings, P. Faratin, ADEPT: Managing Business Processes Using Intelligent Agent
2，N. R. Jennings, P. Faratin, Agent-Based Business Process Management
3，N. R. Jennings, P. Faratin, Using Intelligent Agent to Manage Business Process
4，Maksim Tsvetovatyy, Maria Gini, MAGMA: An Agent-Based Virtual Market for Electronic Commerce, Applied Artificial Intelligence, 11: 501～523, 1997 
5，N. R. Jennings, Controlling Cooperative Problem Solving in Industrial Multi-Agent Systems using Joint Intentions, Applied Artificial Intelligence, 75 (1995) 195~240
6，N. R. Jennings, J. M. Coreva, Using ARCHON to develop real-world DAI applications for electricity transportation management and particle accelerator control
7，D. Cockburn, N. R. Jennings, ARCHON: A DAI System for Industrial Applications
8ｖRouald Schrooten, Walter Van De Velde, Software Agent Foundation for Dynamic Interative Electronic Catalogs, Applied Artificial Intelligence, 11: 459～481, 1997
收稿日期：1999年7月7日
